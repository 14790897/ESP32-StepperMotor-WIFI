# 高级功能使用指南

## 🚀 速度控制

### 功能说明
- 支持1-100%的速度调节
- 实时滑块控制，拖动即可调节
- 速度越高，步进延时越短，电机转动越快
- 默认速度为50%

### 使用方法
1. 在Web界面找到"速度控制"区域
2. 拖动滑块调节速度
3. 速度值会实时显示在滑块旁边
4. 设置后立即生效，影响后续所有运动

### 技术参数
- 速度范围：1-100%
- 延时映射：100%=1ms延时，1%=20ms延时
- 实时调节：无需重启设备

## ⏰ 定时旋转

### 功能说明
- 支持分钟+秒的精确时间设置
- 最长支持60分钟的连续旋转
- 提供快捷时间按钮（30秒、1分钟、2分钟、5分钟、10分钟）
- 支持正转和反转
- 时间到达后自动停止
- 可随时手动停止

### 使用方法
1. 在"定时旋转"区域设置时间：
   - 直接输入分钟和秒数
   - 或点击快捷时间按钮
2. 点击"正转"或"反转"按钮开始
3. 电机将按设定时间旋转
4. 时间到达后自动停止

### 时间设置范围
- 分钟：0-60分钟
- 秒：0-59秒
- 总时间：最短1秒，最长60分钟
- 快捷设置：30秒、1分钟、2分钟、5分钟、10分钟

### 应用场景
- 搅拌应用：设定搅拌时间
- 定时转动：定期转动物体
- 精确控制：需要准确时间控制的场合



## 📊 状态监控

### 实时状态显示
Web界面会实时显示以下状态：

#### 运行状态
- **运行中**：电机正在转动
- **已停止**：电机处于停止状态

#### 当前速度
- 显示当前设定的速度百分比
- 实时更新，反映最新设置

#### 最后命令
- 显示最近执行的控制命令
- 包括基本控制和高级控制

## 🛠️ 高级控制API

### HTTP接口
系统提供RESTful API接口：

#### 速度控制
```
GET /advanced?speed=50
```
参数：speed (1-100)

#### 定时旋转
```
GET /advanced?action=timed&direction=cw&duration=10
GET /advanced?action=timed&direction=cw&minutes=5&seconds=30
```
参数：
- action: timed
- direction: cw(正转) / ccw(反转)
- duration: 持续时间(秒) - 传统方式
- minutes: 分钟数(0-60) - 新方式
- seconds: 秒数(0-59) - 可选，配合minutes使用

#### 停止所有运动
```
GET /advanced?action=stop
```

### 状态查询
```
GET /status
```
返回JSON格式的状态信息：
```json
{
  "running": true,
  "lastCommand": "定时旋转 5秒 正转",
  "currentSpeed": 75
}
```

## 🔧 技术实现

### 非阻塞设计
- 使用定时器和状态机实现
- Web界面响应不受电机运行影响
- 支持运行中修改参数

### 安全机制
- 支持随时停止功能
- 防止参数越界
- 自动状态重置

### 性能优化
- 异步Web服务器
- 最小化内存使用
- 高效的状态更新机制

## 💡 使用技巧

### 速度调节建议
- 低速（1-30%）：适合精确控制
- 中速（30-70%）：适合一般应用
- 高速（70-100%）：适合快速运动

### 定时设置建议
- 短时间（1-10秒）：适合快速测试
- 中等时间（10-60秒）：适合一般应用
- 长时间（60秒以上）：适合持续运行场景

### 故障排除
- 如果电机不响应，检查WiFi连接
- 如果速度异常，重新设置速度值
- 如果定时异常，点击停止后重新开始
